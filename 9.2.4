BEGIN
  FOR rec IN (
    SELECT s.name, SUM(r.marks) AS total_marks
    FROM Students s
    JOIN Results r ON s.student_id = r.student_id
    GROUP BY s.name
    ORDER BY total_marks DESC
  ) LOOP
    DBMS_OUTPUT.PUT_LINE(rec.name || ' ' || rec.total_marks);
  END LOOP;
END;
